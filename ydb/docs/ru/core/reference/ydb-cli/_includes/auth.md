# Аутентификация при соединении CLI с БД

Как описано в статье о [подключении клиента YDB к серверу и аутентификации](../../../concepts/connect.md), для успешной аутентификации в запрос клиентом должен быть добавлен аутентификационный токен, проверяемый сервером.

YDB CLI выбирает [режим аутентификации](../../../concepts/connect.md#auth-modes) и его параметры из следующих источников (в порядке убывания приоритета):

1. Опции, заданные в командной строке вызова YDB CLI
2. Параметры, определенные в заданном опциями командной строки профиле
3. Значения переменных окружения
4. Параметры, определенные в текущем активированном профиле

Если ни на одном шаге не удалось определить требуемые аутентификационные параметры, то YDB CLI будет отправлять запросы на сервер YDB без добавления аутентификационных данных. Это может позволить успешно соединиться с локально развернутыми кластерами YDB, не требующими аутентификации. Для всех доступных по сети баз данных такие запросы будут отклонены с выдачей ошибки аутентификации.

## Параметры командной строки {#command-line-pars}

{% include [options.md](auth/options.md) %}

## Параметры из профиля, выбранного опцией командной строки {#profile}

Если в командной строке при вызове YDB CLI не указано ни одной из опций аутентификации, то CLI производит попытку их определения по профилю, выбранному опцией командной строки `--profile`.

В профиле может быть определено большинство переменных, аналогичных опциям из раздела [параметры командной строки](#command-line-pars). Обработка их значений производится также как и параметров командной строки. 

## Параметры из переменных окружения {#env}

Если в командной строке не был явно указан профиль, или в нём не заданы отвечающие за аутентификацию параметры, то YDB CLI пытается определить режим и параметры аутентификации по окружению YDB CLI, по следующему алгоритму:

{% include [env.md](auth/env.md) %}

## Параметры из активированного профила

Если ни одно из условий предыдущего шага анализа переменных окружения не было выполнено, то YDB CLI пробует определить режим аутентификации и его параметры по  активированному ранее командой YDB CLI `config profile activate` профилю.

