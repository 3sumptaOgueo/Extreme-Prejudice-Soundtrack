# Балансировка нагрузки на диски

В YDB нагрузку на диски можно распределить двумя способами:

## Распределить нагрузку равномерно по группам

На странице [web-мониторинга хайва](../embedded_monitoring/hive.md), в нижней части экрана есть кнокп "Reassign Groups".
При нажатии на нее появится окно с параметрамми для балансировки:

* **Storage pool** - пулл групп хранения для балансировки
* **Storage group** - в случае если не указан предыдущий пункт, можно указать отдельно только одну группу
* **Type** - тип таблеток для которых будет производиться балансировка
* **Channels** - диапазон каналов, для которых будет производиться балансировка
* **Percent** - процент от общего количества каналов таблеток которые переедут в результате балансировки
* **Inflight** - количество одновременно переезжающих на другие группы таблеток

После указания всех параметров, следует нажать сначала "Query", который покажет количество каналов попавшие под переезде и разблокирует кнопку "Reassign".
При нажатии которой начнется балансировка.

## Разложить вдиски равномерно по устройствам

В случае, если вдиски расположены на блочных устройствах не равномерно, можно [перевезти их](moving_vdisks.md#moving_vdisk) по одному с перегруженных устройств.

## Изменение количествa слотов для вдисков на пдисках

Для добавления групп хранения требуется переопределить конфиг хоста, увеличив для него количество слотов на дисках.

Перед этим требуется получить изменяемые конфиг, это можно сделать следующей командой:

```proto
Command {
  TReadHostConfig{
    HostConfigId: <host-config-id>
  }
}
```
    
```
kikimr -s <ендпоинт> admin bs config invoke --proto-file ReadHostConfig.txt
```

Требуется вставить полученный конфиг в протобуф ниже и поменять в нем поле **PDiskConfig/ExpectedSlotCount**.

```proto
Command {
  TDefineHostConfig {
    <хост конфиг>
  }
}
```
    
```
kikimr -s <ендпоинт> admin bs config invoke --proto-file DefineHostConfig.txt
```
